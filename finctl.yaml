# finctl configuration
# This file configures the finctl CLI for building OCI-native OS images

# Project metadata
name: finpilot
description: OCI-native OS appliance built on Universal Blue

# Registry configuration
# These are typically overridden by CI environment variables
registry: ghcr.io
repository: ""  # Set to your GitHub username/org

# Build configuration
build:
  # Base image to build from
  # Options:
  #   - ghcr.io/ublue-os/silverblue-main (GNOME desktop)
  #   - ghcr.io/ublue-os/kinoite-main (KDE desktop)
  #   - ghcr.io/ublue-os/base-main (minimal, no desktop)
  #   - ghcr.io/ublue-os/bluefin (developer-focused)
  base_image: ghcr.io/ublue-os/silverblue-main

  # Fedora major version to track
  fedora_version: "42"

  # Additional build arguments (passed to podman build)
  build_args: {}

  # Cache mount paths for faster rebuilds
  cache_mounts:
    - /var/cache/rpm-ostree
    - /var/cache/libdnf5

  # Build timeout
  timeout: 30m

# Version configuration
version:
  # Version scheme:
  #   - fedora.date.build: 42.20260128.0 (recommended)
  #   - date.build: 20260128.0
  #   - semver: 1.0.0
  scheme: fedora.date.build
  current: ""  # Only used for semver scheme

# Image variants
# Each variant can have its own set of scripts and packages
variants:
  - name: main
    description: Standard desktop variant with GNOME
    flavor: main
    scripts:
      - 10-build.sh
    packages: []

  # Uncomment to add additional variants:
  # - name: nvidia
  #   description: NVIDIA GPU support
  #   flavor: nvidia
  #   scripts:
  #     - 10-build.sh
  #     - 20-nvidia.sh
  #   packages:
  #     - nvidia-driver

  # - name: dx
  #   description: Developer experience variant
  #   flavor: dx
  #   scripts:
  #     - 10-build.sh
  #     - 30-dx.sh
  #   packages:
  #     - code
  #     - podman-docker

# Dependencies (digest-pinned external images)
# Pin critical dependencies by digest for reproducibility
# Renovate can automatically update these
dependencies:
  common:
    image: ghcr.io/projectbluefin/common
    tag: latest
    digest: ""  # Add digest for pinning

  brew:
    image: ghcr.io/ublue-os/brew
    tag: latest
    digest: ""  # Add digest for pinning
